/* ================================
   Game Map Style (Leaflet + Dark UI)
   -------------------------------
   - 기본 색상 변수
   - 전체 레이아웃
   - 헤더 / 검색창
   - Leaflet 팝업 / 범례 / 가이드라인
   ================================ */

:root {
  --bg: #738E95;        /* 배경색 */
  --fg: #e7eaf0;        /* 글자색 */
  --muted: #9aa3b2;     /* 보조 텍스트 색 */
  --panel: #121722;     /* 입력창 / 패널 배경색 */
}

/* Leaflet 기본 배경(#ddd)을 덮어쓰기 */
.leaflet-container {
  background: var(--bg) !important;  /* 원하는 색 */
}

/* 전체 레이아웃 설정 */
* {
  box-sizing: border-box;
}

/* 전체 레이아웃 기본 */
html, body {
  height: 100%;
  margin: 0;
  background: var(--bg);
  color: var(--fg);
  font: 14px/1.5 system-ui, -apple-system, Segoe UI, Roboto, Noto Sans,
        Apple SD Gothic Neo, 'Malgun Gothic', sans-serif;
}

/* 맵: 화면 전체 */
#map {
  position: fixed;
  inset: 0;
}
.leaflet-container { background: var(--bg) !important; }

/* -------------------------------
   떠 있는 UI 패널 (왼쪽 위)
   ------------------------------- */
.ui-panel {
  position: fixed;
  top: 12px;
  left: 12px;
  z-index: 1000;
  background: rgba(10,12,18,0.85);
  border: 1px solid #1f2635;
  border-radius: .8rem;
  padding: .6rem .8rem;
  min-width: 260px;
  backdrop-filter: blur(2px);
}

.ui-panel .topline {
  display: flex;
  align-items: center;
  gap: .6rem;
}

.ui-panel h1 {
  margin: 0;
  font-size: 1rem;
  color: var(--fg);
}

#search {
  background: var(--panel);
  border: 1px solid #222a39;
  border-radius: .6rem;
  padding: .45rem .6rem;
  color: var(--fg);
  outline: none;
  min-width: 160px;
  flex: 1;
}

.ui-panel .subline {
  margin-top: .5rem;
  color: var(--muted);
}

.toggle-bounds { user-select: none; }

/* -------------------------------
   검색창 (헤더 오른쪽)
   ------------------------------- */
#search {
  background: var(--panel);
  border: 1px solid #222a39;
  border-radius: 0.6rem;
  padding: 0.5rem 0.7rem;
  color: var(--fg);
  outline: none;
  min-width: 240px;
}

/* -------------------------------
   Leaflet 팝업 (마커 클릭 시)
   ------------------------------- */
.leaflet-popup-content {
  font-size: 0.9rem;
}

/* 팝업 컨테이너 */
.gm-popup {
  display: flex;
  flex-direction: column;
  gap: .35rem;              /* 요소 간 전체 간격 */
}

/* 제목: 굵고 간격 확보 */
.gm-popup-title {
  font-weight: 700;
  font-size: 1rem;
  line-height: 1.2;
  color: var(--fg);
  margin-bottom: .25rem;    /* 제목→노트 간격 */
}

/* 노트: 본문 톤, 가독성 있는 줄간격 */
.gm-popup-note {
  color: #cfd6e6;
  line-height: 1.45;
  white-space: pre-wrap;    /* 줄바꿈 보존하면 좋을 때 */
}

/* 태그 컨테이너 */
.gm-popup-tags {
  display: flex;
  flex-wrap: wrap;
  gap: .25rem .35rem;
  margin-top: .15rem;       /* 노트→태그 간격 */
}

/* 태그 배지 */
.gm-popup-tags .tag {
  font-size: .75rem;
  padding: .15rem .45rem;
  border-radius: .6rem;
  background: #1c2436;
  border: 1px solid #2a344a;
  color: #9fb3d1;
  line-height: 1.1;
}

/* -------------------------------
   Zoom Level Display
   ------------------------------- */
.zoom-display {
  background: rgba(10, 12, 18, 0.85);
  border: 1px solid #1f2635;
  border-radius: 0.6rem;
  padding: 0.25rem 0.6rem;
  color: var(--muted);
  font-size: 0.8rem;
  margin-bottom: 38px; /* 줌 버튼 위쪽 간격 */
  text-align: right;
}

/* -------------------------------
   통합 패널: 범례 레이아웃 + 선택 기능
   ------------------------------- */
.legend-panel { 
   background: rgba(10,12,18,.85); 
   border:1px solid #1f2635; 
   border-radius:.8rem; 
   padding:.6rem .8rem; 
   color:var(--muted); 
   min-width:200px; 
   max-height:60vh; 
   overflow:auto; 
}

.legend-panel .panel-head { 
   border-bottom:1px solid #232a3a; 
   padding-bottom:.4rem; 
   margin-bottom:.4rem; 
   color:var(--fg); 
}

.legend-panel .panel-group + .panel-group { 
   margin-top:.4rem; 
   padding-top:.4rem; 
   border-top:1px dashed #263047; 
}

.legend-panel ul { 
   list-style:none; 
   margin:.25rem 0 0 1rem; 
   padding:0; 
}

.legend-panel li { 
   padding:.1rem 0; 
}

.legend-panel .chk input { 
   margin-right:.45rem; 
}

/* -------------------------------
   맵 경계선 (디버그용)
   ------------------------------- */
.bounds-rect {
  stroke: #7aa2ff;
  stroke-dasharray: 4 3;
  fill: none;
}

